[
  {
    "id" : "ccd8b3de-81b4-4c2b-bb3d-310c79b601cd",
    "prId" : 23,
    "prUrl" : "https://github.com/scalameta/metals/pull/23",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ed814705-4bbe-49bf-bf3b-7e1ba8228b38",
        "parentId" : null,
        "authorId" : "ef0069c2-046a-496d-a83f-80db27f0d990",
        "body" : "An alternative suggestion in a completely different style.  Nothing wrong with this one though if you want to keep it.  Ignore my lack of filename in the IllegalArgumentExceptions, I just whipped this up in a worksheet.\r\n\r\n```scala\r\ndef pos(content: String, line: Int, col: Int): Int = {\r\n  val (lineCount, pos) = content\r\n    .linesWithSeparators\r\n    .take(line + 1)\r\n    .foldLeft((0, 0)){ (accum, str) =>\r\n      val (lineNum, charCount) = accum\r\n      if (lineNum < line) {\r\n        (lineNum + 1, charCount + str.length)\r\n      } else {\r\n        require(str.length >= col, \"Line is not long enough\")\r\n        (lineNum + 1, charCount + col)\r\n      }\r\n    }\r\n  require(lineCount == line + 1, \"Not enough lines\")\r\n  pos\r\n}\r\n```",
        "createdAt" : "2017-11-11T18:22:49Z",
        "updatedAt" : "2017-11-14T20:08:40Z",
        "lastEditedBy" : "ef0069c2-046a-496d-a83f-80db27f0d990",
        "tags" : [
        ]
      },
      {
        "id" : "7085b132-f131-4700-b150-f1ed0173c84d",
        "parentId" : "ed814705-4bbe-49bf-bf3b-7e1ba8228b38",
        "authorId" : "a2bc4287-0a04-46c7-ab03-33243f01e61a",
        "body" : "This method is on a fairly critical path since it's run for every start/end point during completions. `foldLeft` + tuples creates a lot of unnecessary allocations compared to the while loops. \r\n\r\nHowever, I just found out that scala.meta.Input has an internal `private lazy val cachedLineIndices: Array[Int]` which allows you to get the offset of a line in from an array lookup. I've refactored to use this instead of rolling our own.",
        "createdAt" : "2017-11-11T21:47:25Z",
        "updatedAt" : "2017-11-14T20:08:40Z",
        "lastEditedBy" : "a2bc4287-0a04-46c7-ab03-33243f01e61a",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e9272f240feb4f00bdea5ee50e2808699cd0d0e",
    "line" : 48,
    "diffHunk" : "@@ -1,1 +46,50 @@  }\n\n}"
  }
]