[
  {
    "id" : "d680863b-541d-4307-8aa5-eb7b8dcdf366",
    "prId" : 93,
    "prUrl" : "https://github.com/scalameta/metals/pull/93",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0d0d515a-7617-479b-81f8-29594b91484a",
        "parentId" : null,
        "authorId" : "a2bc4287-0a04-46c7-ab03-33243f01e61a",
        "body" : "I was gonna propose that we convert this into some `Observable[Source]` for the active open buffer but I don't think that will work since we don't receive a notification when the active/focused buffer changes. We only receive notifications didChange and documentSymbols. \r\n\r\nI think keeping this in `Buffers` is actually not as bad as it seems at first sight. Can we maybe hook into the `didClose` event to remove stale sources?",
        "createdAt" : "2017-12-04T06:58:00Z",
        "updatedAt" : "2017-12-04T23:49:22Z",
        "lastEditedBy" : "a2bc4287-0a04-46c7-ab03-33243f01e61a",
        "tags" : [
        ]
      },
      {
        "id" : "abb9d59d-1077-4bfc-b17b-2405781ee593",
        "parentId" : "0d0d515a-7617-479b-81f8-29594b91484a",
        "authorId" : "c7773eab-5a5b-4ca4-aed0-7b8a59085421",
        "body" : "> I think keeping this in Buffers is actually not as bad as it seems at first sight.\r\n\r\nIs the parsed `Source` per buffer useful anywhere else?\r\n\r\n> Can we maybe hook into the didClose event to remove stale sources?\r\n\r\nGood idea, I will add it.",
        "createdAt" : "2017-12-04T20:10:35Z",
        "updatedAt" : "2017-12-04T23:49:22Z",
        "lastEditedBy" : "c7773eab-5a5b-4ca4-aed0-7b8a59085421",
        "tags" : [
        ]
      },
      {
        "id" : "7e7d44cf-968b-4e3b-9f5b-7aece9015dca",
        "parentId" : "0d0d515a-7617-479b-81f8-29594b91484a",
        "authorId" : "a2bc4287-0a04-46c7-ab03-33243f01e61a",
        "body" : "> Is the parsed Source per buffer useful anywhere else?\r\n\r\nYes, in scalafix. We should share the pipeline between the two, putting it in Buffers is a good start.",
        "createdAt" : "2017-12-04T21:52:38Z",
        "updatedAt" : "2017-12-04T23:49:22Z",
        "lastEditedBy" : "a2bc4287-0a04-46c7-ab03-33243f01e61a",
        "tags" : [
        ]
      },
      {
        "id" : "37d4b070-3a20-4d89-b43d-72fbedd63312",
        "parentId" : "0d0d515a-7617-479b-81f8-29594b91484a",
        "authorId" : "c7773eab-5a5b-4ca4-aed0-7b8a59085421",
        "body" : "Added hook for `didClose` event in d890af94d4d84e3e2267a08f8b92ce761fa4a7a7. Should it also remove from the `contents` map?",
        "createdAt" : "2017-12-04T23:43:25Z",
        "updatedAt" : "2017-12-04T23:49:22Z",
        "lastEditedBy" : "c7773eab-5a5b-4ca4-aed0-7b8a59085421",
        "tags" : [
        ]
      }
    ],
    "commit" : "7b17cbf33208eb27890af0e9b1a6a7b9016afbcb",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +46,50 @@    Option(contents.get(path)).getOrElse(readFromDisk(path))\n\n  private val sources: JMap[AbsolutePath, Source] = new ConcurrentHashMap()\n  // Tries to parse and record it or fallback to an old source if it existed\n  def source(path: AbsolutePath): Option[Source] ="
  }
]