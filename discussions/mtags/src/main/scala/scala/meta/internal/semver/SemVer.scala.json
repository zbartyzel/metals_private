[
  {
    "id" : "7c61d8a4-4f44-4538-8ddf-fcf4a5f923db",
    "prId" : 2264,
    "prUrl" : "https://github.com/scalameta/metals/pull/2264",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e3027db8-3ea2-4e4d-a85e-f525c339d2a2",
        "parentId" : null,
        "authorId" : "8a84f8b6-8e04-4802-937a-9ed4764e8556",
        "body" : "Sorry, I think I gave a wrong hint...\r\nHow about comparing versions with different pre-release versions? The following test should pass, but I guess it fails now.\r\n \r\n```\r\n    assert(\r\n      SemVer.isLaterScalaVersion(\"3.0.0-M1\", \"3.0.0-RC1\")\r\n    )\r\n```\r\n\r\nWe have to compare `releaseCandidate` and `milestone` simultaneously.\r\nOr store the label (like `RC` or `M` part) to `Version` and compare those labels by ASCII sort order (this would be a more generic implementation).\r\n\r\n```scala\r\n  case class Version(\r\n      major: Int,\r\n      minor: Int,\r\n      patch: Int,\r\n      preRelease: Option[(String, Int)], // something like this?\r\n  ) \r\n```\r\n\r\n> Identifiers with letters or hyphens are compared lexically in ASCII sort order.\r\n> https://semver.org/#spec-item-11",
        "createdAt" : "2020-11-27T12:15:02Z",
        "updatedAt" : "2020-11-27T14:42:44Z",
        "lastEditedBy" : "8a84f8b6-8e04-4802-937a-9ed4764e8556",
        "tags" : [
        ]
      },
      {
        "id" : "361eb420-5688-4a34-bc79-da81e99de2e5",
        "parentId" : "e3027db8-3ea2-4e4d-a85e-f525c339d2a2",
        "authorId" : "a7ecab15-7126-4839-9885-ed1a3031e6b8",
        "body" : "ach, righ!. Every time I think I got it right, there are still edge cases. I will add tests for that too and try figure it out. Good catch.",
        "createdAt" : "2020-11-27T13:36:32Z",
        "updatedAt" : "2020-11-27T14:42:44Z",
        "lastEditedBy" : "a7ecab15-7126-4839-9885-ed1a3031e6b8",
        "tags" : [
        ]
      },
      {
        "id" : "a8986522-5632-45da-a0ed-ce76c3d73bd6",
        "parentId" : "e3027db8-3ea2-4e4d-a85e-f525c339d2a2",
        "authorId" : "a7ecab15-7126-4839-9885-ed1a3031e6b8",
        "body" : "Added additional check:\r\n```scala\r\n      // 3.0.0-RC1 > 3.0.0-M1\r\n      this.releaseCandidate.isDefined && that.milestone.isDefined ||\r\n```",
        "createdAt" : "2020-11-27T14:43:06Z",
        "updatedAt" : "2020-11-27T14:43:06Z",
        "lastEditedBy" : "a7ecab15-7126-4839-9885-ed1a3031e6b8",
        "tags" : [
        ]
      },
      {
        "id" : "487e5e9c-c409-4ccd-8820-2098cd14c308",
        "parentId" : "e3027db8-3ea2-4e4d-a85e-f525c339d2a2",
        "authorId" : "43e93173-6a0c-470b-b449-2889fd9eb639",
        "body" : "lol so many checks. Great job on figuring these out.",
        "createdAt" : "2020-11-27T18:08:38Z",
        "updatedAt" : "2020-11-27T18:09:11Z",
        "lastEditedBy" : "43e93173-6a0c-470b-b449-2889fd9eb639",
        "tags" : [
        ]
      },
      {
        "id" : "15e4ef74-abf0-410d-ba16-e07a1ee29d1f",
        "parentId" : "e3027db8-3ea2-4e4d-a85e-f525c339d2a2",
        "authorId" : "a7ecab15-7126-4839-9885-ed1a3031e6b8",
        "body" : "Yeah, that's why I was not keen on options at first. But I think with the comments it's not that bad. And I added a lot of tests :sweat_smile: ",
        "createdAt" : "2020-11-27T18:20:08Z",
        "updatedAt" : "2020-11-27T18:20:08Z",
        "lastEditedBy" : "a7ecab15-7126-4839-9885-ed1a3031e6b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "ebff9647fa554cc267882722df8ff7f1a60d894e",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +23,27 @@      comparePreRelease(that, (v: Version) => v.releaseCandidate) ||\n      // 3.0.0-M2 > 3.0.0-M1\n      comparePreRelease(that, (v: Version) => v.milestone)\n\n    }"
  },
  {
    "id" : "433684a1-c8dc-4ed9-919e-0a03a2812779",
    "prId" : 1584,
    "prUrl" : "https://github.com/scalameta/metals/pull/1584",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "63c4128c-6be2-430f-a466-b7df8e9270bb",
        "parentId" : null,
        "authorId" : "bc07a4cc-a4ee-48f6-ae1e-f36bf246c466",
        "body" : "I refactored this to support a slightly more general use case.\r\n\r\nWe still compare versions only by x.y.z, ignoring any other following modifier. This has some edge cases such as `1.0.0+1` being equal to `1.0.0-SNAPSHOT` and `1.0.0+56-abcdefg`, but it still covers all our uses cases for now",
        "createdAt" : "2020-04-04T13:33:29Z",
        "updatedAt" : "2020-04-08T10:30:38Z",
        "lastEditedBy" : "bc07a4cc-a4ee-48f6-ae1e-f36bf246c466",
        "tags" : [
        ]
      }
    ],
    "commit" : "ba70749edb494f6da26064369a549085fcb87161",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +24,28 @@  def isCompatibleVersion(minimumVersion: String, version: String): Boolean = {\n    Version.fromString(version) >= Version.fromString(minimumVersion)\n  }\n}"
  },
  {
    "id" : "aaa5e59d-bc0e-4072-be84-a008bdb6c3a8",
    "prId" : 1256,
    "prUrl" : "https://github.com/scalameta/metals/pull/1256",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "55e0983c-9e3f-489f-8dd3-a7ff1b68879f",
        "parentId" : null,
        "authorId" : "a7ecab15-7126-4839-9885-ed1a3031e6b8",
        "body" : "Fixed it to work with `1.4.0-RC` etc. and snapshot versions.",
        "createdAt" : "2020-01-06T12:46:54Z",
        "updatedAt" : "2020-01-06T12:46:54Z",
        "lastEditedBy" : "a7ecab15-7126-4839-9885-ed1a3031e6b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "5221982e1605895d70c5abd22174e1406e1e0efb",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +6,10 @@\n    def splitVersion(v: String) =\n      v.replaceAll(\"(-|\\\\+).+$\", \"\").split('.')\n\n    (splitVersion(minimumVersion), splitVersion(version)) match {"
  }
]